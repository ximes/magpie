(function(){this._escape=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},this._unescape=function(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"')},this.render_tree=function(e,n){var t,r,l,o,d,a,i,p,g,c,h,s,u,f,_,v,b,x,m,q,y;if(null==n&&(n={}),d="",q={id:"id",node:null,root:!1,level:0,boost:[]},$.extend(q,n),0!==q.boost.length){for(t=[],a=0,h=e.length;a<h;a++)x=e[a],m=x.parent_id||0,i=t[m],i instanceof Array||(t[m]=[]),t[m].push(x);q.boost=t}if(q.node)for(r=[],l="",r=t[q.node.id],v=0,_=r.length;v<_;v++)x=r[v],$.extend(q,{node:x,root:!1,level:q.level+1}),l=render_tree(e,q),d+=q.render_node(x,l,q);else{if(y=q.boost[0],b=e[0],0===y.length&&0!==e.length){for(p=0,s=e.length;p<s;p++)o=e[p],o.parent_id<b.parent_id&&(b=o);for(g=0,u=e.length;g<u;g++)o=e[g],o.parent_id===b.parent_id&&y.push(o)}for(c=0,f=y.length;c<f;c++)x=y[c],$.extend(q,{node:x,root:!1,level:q.level+1}),l=render_tree(e,q),d+=q.render_node(x,l,q)}return d}}).call(this);