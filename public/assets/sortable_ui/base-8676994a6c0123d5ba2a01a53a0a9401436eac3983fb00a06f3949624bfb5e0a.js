(function(){this.TheSortableTree||(this.TheSortableTree={}),this.TheSortableTree.SortableUI=function(){return{init:function(){var e,t,r;return r=$(".the-sortable-tree"),0!==r.length&&(t=r.data("rebuild_url")||r.data("rebuild-url"),e=r.data("max_levels")||r.data("max-levels"),r.nestedSortable({tabSize:25,listType:"ol",disableNesting:"the-sortable-tree--no-nest",listClass:"the-sortable-tree--nested-set",errorClass:"the-sortable-tree--sortable-error",maxLevels:e,placeholder:"the-sortable-tree--placeholder",handle:".the-sortable-tree--handler",toleranceElement:"> div",items:"li",helper:"clone",tolerance:"pointer",revert:250,opacity:.6,forcePlaceholderSize:!0}),r.on("sortupdate",function(){return function(e,r){var a,l,n,o,s,i;return l=r.item,a="node-id",n=l.data(a),i=l.prev().data(a),o=l.next().data(a),s=l.parent().parent().data(a),TheSortableTree.SortableUI.rebuild_sortable_tree(t,n,s,i,o)}}()),!0)},rebuild_sortable_tree:function(e,t,r,a,l){return $.ajax({type:"POST",dataType:"script",url:e,data:{id:t,parent_id:r,prev_id:a,next_id:l},beforeSend:function(){return $(".the-sortable-tree--handler").css({opacity:0})},success:function(){return $(".the-sortable-tree--handler").css({opacity:1})},error:function(e,t,r){return log(r)}})}}}()}).call(this);