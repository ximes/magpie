(function(){this.rebuild_sortable_tree=function(e,t,r,a,n){return $.ajax({type:"POST",dataType:"script",url:e,data:{id:t,parent_id:r,prev_id:a,next_id:n},beforeSend:function(){return $(".the_sortable_tree-handler").hide()},success:function(){return $(".the_sortable_tree-handler").show()},error:function(e,t,r){return console.log(r)}})},this.init_sortable_tree=function(){var e,t,r;return r=$(".the_sortable_tree"),0!==r.length&&(t=r.data("rebuild_url")||r.data("rebuild-url"),e=r.data("max_levels")||r.data("max-levels"),r.nestedSortable({items:".the_sortable_tree-item",handle:".the_sortable_tree-handler",placeholder:"the_sortable_tree-placeholder",listClass:"the_sortable_tree-nested_set",tolerance:"pointer",helper:"clone",maxLevels:e,revert:250,tabSize:25,opacity:.6,disableNesting:"no-nest",toleranceElement:"> div",forcePlaceholderSize:!0}),r.on("sortupdate",function(){return function(e,r){var a,n,l,o,i,d;return n=r.item,a="node-id",l=n.data(a),d=n.prev().data(a),o=n.next().data(a),i=n.parent().parent().data(a),rebuild_sortable_tree(t,l,i,d,o)}}()),!0)},$(function(){return init_sortable_tree()})}).call(this);